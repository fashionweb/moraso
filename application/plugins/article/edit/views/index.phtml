<?php echo $this->partial('edit-hover.phtml'); ?>

Ext.getCmp('page-edit-tab').add({
	id: 'article-plugin-edit',
	title: '<?php echo Aitsu_Translate :: translate('Edit'); ?>',
	bodyCfg: {
		tag: 'iframe',
		id: 'edit-iframe-<?php echo $this->idartlang; ?>',
        src: '/adm/edit/<?php echo $this->idartlang; ?>',
        style: {
			border: '0px none'
        }
	},
	listeners: {
		render: function() {
			Ext.get('edit-iframe-<?php echo $this->idartlang; ?>').on('load', function(e, t, o) {
				$(document).trigger('edit-page-content', [$('#edit-iframe-<?php echo $this->idartlang; ?>')]);
			});
		}
	}
});

/*
Shows / hides sub template bars.
$(document).trigger('toogle-sub-templates');
*/

/*
Replaces the previously edited area.
$(document).trigger('doReplace', [p.type, p.container, p.idartlang, '<div><div class="aitsu_hover"><div id="PagetitleAsHeadline--440" class="aitsu_editable"><div class="aitsu_hover"><code class="aitsu_params" style="display:none;"> tag = h1 </code><h1>test</h1></div></div></div></div>']);
*/

var doEditHandler = function(p) {
	alert('edit: ' + p.type + ' / ' + p.container + ' / ' + p.idartlang);
	/* just showing what then would happen (after editing is successfylly done). */
	$(document).trigger('doReplace', [p.type, p.container, p.idartlang, '<div><div class="aitsu_hover"><div id="PagetitleAsHeadline--440" class="aitsu_editable"><div class="aitsu_hover"><code class="aitsu_params" style="display:none;"> tag = h1 </code><h1>test</h1></div></div></div></div>']);
}
